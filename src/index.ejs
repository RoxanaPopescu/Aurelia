<% const environment = htmlWebpackPlugin.options.environment; %>
<% const integrationPath = environment.name === "development" ? `${environment.publicPath}resources/themes/mover-blue/integration` : `${environment.publicPath}resources/theme/integration` %>

<!DOCTYPE html>

<html lang="<%- environment.locale %>" environment="<%- environment.name %>" release="<%- environment.commit %>" class="app">

    <head>

        <!-- Technical metadata -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover">
        <base href="<%- environment.appBasePath %>">

        <!-- Crawler metadata -->
        <meta name="robots" content="noindex,nofollow">
        <meta name="prerender-status-code" content="504">

        <!-- Content metadata -->
        <title>Mover</title>
        <meta name="description" content="Modernize your logistics with Mover.">

        <!-- Determine the preferred color scheme, and set a cookie so the server knows which resources to serve -->
        <script>
            const preferredColorScheme = matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
            document.cookie = `prefers-color-scheme=${preferredColorScheme};path=<%- environment.appBasePath %>;`
        </script>

        <!-- Standard integration metadata -->
        <link rel="icon" href="<%- integrationPath %>/standard/favicon.png" type="image/png">
        <link rel="mask-icon" href="<%- integrationPath %>/standard/icon-mask.svg" color="#0747a6">
        <link rel="manifest" href="<%- integrationPath %>/standard/manifest.json" crossorigin="use-credentials">
        <meta name="application-name" content="Mover">

        <!-- Apple specific integration metadata -->
        <link rel="apple-touch-icon" href="<%- integrationPath %>/apple/icon.png">
        <meta name="apple-mobile-web-app-title" content="Mover">

        <!-- Google specific integration metadata -->
        <meta name="google" content="notranslate">

        <!-- Microsoft specific integration metadata -->
        <meta name="msapplication-config" content="<%- integrationPath %>/microsoft/browserconfig.xml">

        <!-- Injected content -->

    </head>

    <body context="app" surface="base">

        <!-- App -->
        <main aurelia-app="index">

            <!-- Splash -->
            <div class="splash">

                <style>

                    html, body
                    {
                        margin: 0;
                    }

                    .splash
                    {
                        position: fixed;
                        height: 100vh;
                        width: 100vw;
                        background-color: #fbfbfb;
                        background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 179 100'><path fill='black' fill-rule='evenodd' d='M166.6 66.835l5.375-20a111.594 111.594 0 0 0 2.079-9.222c.544-3.011.815-5.846.815-8.5 0-9.04-2.473-16.153-7.416-21.338C162.508 2.592 155.339 0 145.933 0c-7.233 0-13.805 1.509-19.71 4.52-5.908 3.014-11.152 7.173-15.733 12.476-1.807-5.063-4.823-9.16-9.039-12.297C97.227 1.57 91.742 0 84.994 0 79.207 0 74.052 1.295 69.53 3.887c-4.52 2.595-8.47 5.637-11.845 9.133L60.58 2.168H26.221L0 100h34.36l13.924-51.72c1.565-5.665 3.796-10.035 6.69-13.108 2.894-3.075 6.629-4.611 11.213-4.611 3.494 0 6.116.904 7.865 2.71 1.746 1.81 2.622 4.342 2.622 7.597 0 1.085-.121 2.351-.361 3.797a42.968 42.968 0 0 1-.904 4.159L61.665 100h34.358l13.924-51.72c1.567-5.665 3.8-10.035 6.692-13.108 2.893-3.075 6.629-4.611 11.213-4.611 3.616 0 6.267.904 7.957 2.71 1.685 1.81 2.53 4.342 2.53 7.597 0 1.085-.12 2.351-.361 3.797a42.176 42.176 0 0 1-.905 4.159l-4.773 18.01h-12.13l19.08 32.576 39.167-32.575H166.6z'/></svg>");
                        background-position: 50% calc(50% - 20px);
                        background-repeat: no-repeat;
                        background-size: auto calc(80px + 8vh);
                        opacity: 0.85;
                    }
                </style>

            </div>

        </main>

        <% if (environment.name === "production") { %>
        <!-- FullStory -->
        <script defer>
            window['_fs_debug'] = false;
            window['_fs_host'] = 'fullstory.com';
            window['_fs_script'] = 'edge.fullstory.com/s/fs.js';
            window['_fs_org'] = 'o-1B77WR-na1';
            window['_fs_namespace'] = 'FS';
            (function(m,n,e,t,l,o,g,y){
                if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
                g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s);};g.q=[];
                o=n.createElement(t);o.async=1;o.crossOrigin='anonymous';o.src='https://'+_fs_script;
                y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
                g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g('event',{n:i,p:v},s)};
                g.anonymize=function(){g.identify(!!0)};
                g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
                g.log = function(a,b){g("log",[a,b])};
                g.consent=function(a){g("consent",!arguments.length||a)};
                g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
                g.clearUserCookie=function(){};
                g.setVars=function(n, p){g('setVars',[n,p]);};
                g._w={};y='XMLHttpRequest';g._w[y]=m[y];y='fetch';g._w[y]=m[y];
                if(m[y])m[y]=function(){return g._w[y].apply(this,arguments)};
                g._v="1.3.0";
            })(window,document,window['_fs_namespace'],'script','user');
        </script>
        <% } %>

        <!-- Injected content -->

    </body>

</html>

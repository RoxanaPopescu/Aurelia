<template>

    <require from="app/components/address-input/address-input"></require>

    <modal-backdrop close="all"></modal-backdrop>

    <modal-panel name="edit-team" position="right" close-button.bind="true" close-shortcut.bind="true" scroll validation validation.ref="validation">

        <div slot="actions">

            <button
                if.bind="team.id"
                appearance="icon"
                title.translate="Save changes"
                click.trigger="onSubmitClick()">
                <icon name="save"></icon>
            </button>

        </div>

        <modal-header scroll-fade>

            <h1 class="font-largest margin-bottom" tabindex="-1" autofocus="visible.bind: false">

                <span if.bind="!team.id" translate>
                    New team
                </span>

                <span if.bind="team.id" translate>
                    Edit team
                </span>

            </h1>

            <h2 class="font-large" translate>
                Please specify the details of the team.
            </h2>

        </modal-header>

        <modal-section class="margin-bottom">

            <div class="control-row margin-large-bottom">

                <text-input value.bind="team.name" label="above" class="flex-basis-1-of-1">

                    <div slot="heading" translate>
                        Team name
                    </div>

                    <div slot="validation">

                        <required-validator
                            value.bind="team.name">
                        </required-validator>

                        <unique-validator
                            new-value.bind="team.name"
                            old-value.bind="teamName"
                            all-values.bind="teams | map: 'name'">
                        </unique-validator>

                    </div>

                </text-input>

            </div>

            <div class="control-row margin-large-bottom">

                <phone-input value.bind="team.phoneNumber" label="above" class="flex-basis-1-of-1">

                    <div slot="heading" translate>
                        Contact phone number
                    </div>

                </phone-input>

            </div>

            <div class="control-row margin-large-bottom">

                <address-input value.bind="team.address" label="above" class="flex-basis-1-of-1">

                    <div slot="heading" translate>
                        Address
                    </div>

                </address-input>

            </div>

            <div class="control-row margin-large-bottom">

                <text-input value.bind="team.vatNumber" label="above" class="flex-basis-1-of-1">

                    <div slot="heading" translate>
                        VAT number
                    </div>

                </text-input>

            </div>

            <div class="control-row">

                <switch-toggle value.bind="team.invoiceDirectly" label="before" class="flex-basis-1-of-1">

                    <div slot="heading" translate>
                        Invoice team directly
                    </div>

                </switch-toggle>

            </div>

            <div if.bind="team.invoiceDirectly" class="control-row margin-large-top">

                <text-input value.bind="team.invoiceEmail" label="above" class="flex-basis-1-of-1">

                    <div slot="heading" translate>
                        Invoice email
                    </div>

                    <div slot="validation">

                        <required-validator
                            value.bind="team.invoiceEmail">
                        </required-validator>

                    </div>

                </text-input>

            </div>

        </modal-section>

        <button if.bind="!team.id" appearance="solid" accent="primary" class="margin-large-top" click.delegate="onSubmitClick()" translate>
            Create team
        </button>

    </modal-panel>

</template>

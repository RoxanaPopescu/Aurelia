<template>

    <require from="./components/organization-profile/organization-profile"></require>
    <require from="./components/organization-tracking/organization-tracking"></require>
    <require from="./settings.scss"></require>

    <page name="settings">

        <page-content scroll scroll.ref="scroll" validation validation.ref="validation">

            <page-header scroll-fade>

                <h1 class="font-largest margin-bottom">
                    <path-nav>

                        <span translate>
                            Organization
                        </span>

                    </path-nav>
                </h1>

                <toolbar>

                    <tab-nav appearance="solid" value.bind="tab">

                        <tab name="profile" invalid.bind="profileValidation.invalid" translate>
                            Profile
                        </tab>

                        <tab if-environment="xdevelopment" name="tracking" invalid.bind="trackingValidation.invalid" translate>
                            Track & Trace
                        </tab>

                    </tab-nav>

                    <div class="flex-push-right control-row">

                        <template if-claims="edit-organizations">
                            <button
                                appearance="solid"
                                accent="primary"
                                click.trigger="onSaveChangesClick()"
                                disabled.bind="operation.pending"
                                translate>
                                Save changes
                            </button>
                        </template>

                    </div>

                </toolbar>

            </page-header>

            <div class="organization-settings-view-container">

                <organization-profile
                    show.bind="tab === 'profile'"
                    profile.bind="settings.profile"
                    readonly.bind="readonly"
                    validation
                    validation.ref="profileValidation">
                </organization-profile>

                <template if-environment="xdevelopment">
                <organization-tracking
                    show.bind="tab === 'tracking'"
                    tracking.bind="settings.tracking"
                    readonly.bind="readonly"
                    validation
                    validation.ref="trackingValidation">
                </organization-tracking>
                </template>

                <busy-overlay if.bind="operation.pending"></busy-overlay>

            </div>

        </page-content>

    </page>

</template>

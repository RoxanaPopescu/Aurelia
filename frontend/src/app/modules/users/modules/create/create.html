<template>

    <require from="./create.scss"></require>

    <page name="create">

        <page-content scroll validation validation.ref="validation">

            <page-header class="flex-row" scroll-fade>

                <h1 class="font-largest">
                    <path-nav>

                        <a accent="inherit" href="/users" translate>
                            Users
                        </a>

                        <span translate>
                            New user
                        </span>

                    </path-nav>
                </h1>

                <toolbar class="flex-push-right">

                    <button
                        appearance="solid"
                        accent="primary"
                        click.trigger="onSendInviteClick()"
                        disabled.bind="operation.pending || userInvite == null"
                        translate>
                        Send invite
                    </button>

                </toolbar>

            </page-header>

            <page-section class="user-section">

                <div class="control-row margin-bottom">

                    <text-input
                        class="flex-basis-1-of-2"
                        label="above"
                        value.bind="userInvite.firstName"
                        class="margin-medium-top">

                        <div slot="heading" translate>
                            First name
                        </div>

                        <div slot="validation">

                            <required-validator
                                value.bind="userInvite.firstName">
                            </required-validator>

                        </div>

                    </text-input>

                    <text-input
                        class="flex-basis-1-of-2"
                        label="above"
                        value.bind="userInvite.lastName"
                        class="margin-medium-top">

                        <div slot="heading" translate>
                            Last name
                        </div>

                        <div slot="validation">

                            <required-validator
                                value.bind="userInvite.lastName">
                            </required-validator>

                        </div>

                    </text-input>

                </div>

                <div class="control-row margin-bottom">
                    <email-input
                        class="flex-basis-1-of-1"
                        label="above"
                        value.bind="userInvite.email"
                        class="margin-medium-top">

                        <div slot="heading" translate>
                            Email
                        </div>

                        <div slot="validation">

                            <required-validator
                                value.bind="userInvite.email">
                            </required-validator>

                        </div>

                    </email-input>

                </div>


                <div class="control-row margin-bottom">

                    <select-input
                        class="flex-basis-1-of-1"
                        label="above"
                        value.bind="userInvite.outfitId"
                        display-value.bind="selectedDepartment.primaryName"
                        none.bind="false"
                        filter="auto">

                        <div slot="heading" translate>
                            Department
                        </div>

                        <item repeat.for="department of departments" model.bind="department.id">
                            ${department.primaryName}
                        </item>

                        <div slot="validation">

                            <required-validator
                                value.bind="userInvite.outfitId">
                            </required-validator>

                        </div>

                    </select-input>

                </div>

                <div class="control-row">

                    <select-input
                        class="flex-basis-1-of-1"
                        label="above"
                        value.bind="userInvite.roleId"
                        display-value.bind="selectedRole.name"
                        none.bind="false"
                        filter="auto"
                        class="margin-medium-top">

                        <div slot="heading" translate>
                            Role
                        </div>

                        <item repeat.for="role of roles" model.bind="role.id">
                            ${role.name}
                        </item>

                        <div slot="validation">

                            <required-validator
                                value.bind="userInvite.roleId">
                            </required-validator>

                        </div>

                    </select-input>

                </div>

                <busy-overlay if.bind="operation.pending || userInvite == null"></busy-overlay>

            </page-section>

        </page-content>

    </page>

</template>

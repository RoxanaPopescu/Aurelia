<template>

    <require from="app/components/name-value-pair/name-value-pair"></require>
    <require from="./components/events/events"></require>
    <require from="./components/order-overview/order-overview"></require>
    <require from="./components/shippings/shippings"></require>
    <require from="./details.scss"></require>

    <page name="details">

        <page-sidebar scroll>

            <page-section toggle.bind="true">

                <div slot="header" translate>
                    Order information
                </div>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        ID
                    </div>

                    <div slot="value" empty-value>
                        ${order.slug}
                    </div>

                </name-value-pair>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Status
                    </div>

                    <div slot="value" empty-value>
                        ${order.state.status.name}
                    </div>

                </name-value-pair>

            </page-section>

            <page-section toggle.bind="true">

                <div slot="header" translate>
                    Pickup
                </div>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Name
                    </div>

                    <div slot="value" empty-value>
                        ${order.pickup.contactName}
                    </div>

                </name-value-pair>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Address
                    </div>

                    <div slot="value" empty-value>
                        <span
                            if.bind="order.pickup.location.address"
                            innerhtml.bind="order.pickup.location.address.toHtmlString()">
                        </span>
                    </div>

                </name-value-pair>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Phone
                    </div>

                    <div slot="value" empty-value>
                        <span
                            if.bind="order.pickup.contactPhoneNumber != null"
                            innerhtml.bind="order.pickup.contactPhoneNumber.toString()">
                        </span>
                    </div>

                </name-value-pair>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Earliest
                    </div>

                    <div slot="value" empty-value>
                        ${order.pickup.appointment.earliestArrivalTime | time: 'narrow' : false}
                    </div>

                </name-value-pair>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Latest
                    </div>

                    <div slot="value" empty-value>
                        ${order.pickup.appointment.latestArrivalTime | time: 'narrow' : false}
                    </div>

                </name-value-pair>

                <name-value-pair>
                    <div slot="name" translate>
                        Instructions
                    </div>
                </name-value-pair>

                <name-value-pair>
                    <div slot="value" class="text-align-left" empty-value>
                        ${order.pickup.instructions}
                    </div>
                </name-value-pair>

            </page-section>

            <page-section toggle.bind="true">

                <div slot="header" translate>
                    Delivery
                </div>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Name
                    </div>

                    <div slot="value" empty-value>
                        ${order.delivery.contactName}
                    </div>

                </name-value-pair>

                <name-value-pair>

                    <div slot="name" translate>
                        Address
                    </div>

                    <div slot="value" empty-value>
                        <span
                            if.bind="order.delivery.location.address"
                            innerhtml.bind="order.delivery.location.address.toHtmlString()">
                        </span>
                    </div>

                </name-value-pair>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Phone
                    </div>

                    <div slot="value" empty-value>
                        <span
                            if.bind="order.delivery.contactPhoneNumber != null"
                            innerhtml.bind="order.delivery.contactPhoneNumber.toString()">
                        </span>
                    </div>

                </name-value-pair>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Earliest
                    </div>

                    <div slot="value" empty-value>
                        ${order.delivery.appointment.earliestArrivalTime | time: 'narrow' : false}
                    </div>

                </name-value-pair>

                <name-value-pair class="margin-bottom">

                    <div slot="name" translate>
                        Latest
                    </div>

                    <div slot="value" empty-value>
                        ${order.delivery.appointment.latestArrivalTime | time: 'narrow' : false}
                    </div>

                </name-value-pair>

                <name-value-pair>
                    <div slot="name" translate>
                        Instructions
                    </div>
                </name-value-pair>

                <name-value-pair>
                    <div slot="value" class="text-align-left" empty-value>
                        ${order.delivery.instructions}
                    </div>
                </name-value-pair>

            </page-section>

            <page-section toggle.bind="true">

                <div slot="header" translate>
                    Tags
                </div>

                <div if.bind="order == null || order.tags.length == 0" empty-value></div>

                <tags-input if.bind="order.tags.length > 0" readonly.bind="true" class="--tags-only">

                    <div slot="value">
                        <tag repeat.for="tag of order.tags">
                            ${tag}
                        </tag>
                    </div>

                </tags-input>

            </page-section>

        </page-sidebar>

        <page-content scroll scroll.ref="scroll">

            <page-header scroll-fade>

                <h1 class="font-largest margin-bottom">

                    <path-nav>

                        <a accent="inherit" href="/orders" translate>
                            Orders
                        </a>

                        <span if.bind="order.slug != null">
                            ${order.slug}
                        </span>

                        <div if.bind="order.slug == null" class="text-skeleton" style="width: 60rem"></div>

                    </path-nav>

                </h1>

                <toolbar>

                    <tab-nav appearance="solid" value.bind="tab">

                        <tab name="events" invalid.bind="eventsValidation.invalid" translate>
                            Events
                        </tab>

                        <tab name="shippings" invalid.bind="shippingsValidation.invalid" translate>
                            Shippings
                        </tab>

                    </tab-nav>

                    <div class="flex-push-right control-row">

                        <button appearance="outline" accent="primary" click.trigger="onEditOrderClick()" translate>
                            Edit order
                        </button>

                    </div>

                </toolbar>

            </page-header>

            <order-overview show.bind="tab === 'events'" order.bind="order"></order-overview>

            <events
                show.bind="tab === 'events'"
                order.bind="order"
                validation
                validation.ref="eventsValidation">
            </events>

            <shippings
                show.bind="tab === 'shippings'"
                order.bind="order"
                validation
                validation.ref="shippingsValidation">
            </shippings>

        </page-content>

    </page>

</template>

<template>

    <require from="./bulk-action.scss"></require>
    <require from="app/components/info-card/info-card"></require>

    <modal-backdrop close="all"></modal-backdrop>

    <modal-panel name="bulk-action" position="right" close-button.bind="true" close-shortcut.bind="true" scroll validation validation.ref="validation">

        <modal-header scroll-fade="0.3">

            <h1 class="font-largest flex-row" tabindex="-1" autofocus="visible.bind: false">

                <div translate>
                    Cancel orders
                </div>

            </h1>

        </modal-header>

        <modal-section class="margin-bottom" if.bind="ordersWithIssues.length > 0">

            <div slot="header" translate>
                ${model.orders.length} Orders with issues
            </div>

            <div translate class="margin-bottom">
                You can only cancel orders that are placed or ready
            </div>

            <data-table
                appearance="rows">

                <data-table-headers>

                    <data-table-cell>
                        <span class="text-truncate" translate>
                            ID
                        </span>
                    </data-table-cell>

                    <data-table-cell>
                        <span class="text-truncate" translate>
                            Status
                        </span>
                    </data-table-cell>

                </data-table-headers>

                <template repeat.for="order of model.orders">

                    <data-table-row class="--problems" href="/orders/details/${order.slug}" target="_blank">

                        <data-table-cell>
                            <span class="text-truncate">
                                ${order.slug}
                            </span>
                        </data-table-cell>

                        <data-table-cell>
                            <span class="text-truncate">
                                ${order.status.name}
                            </span>
                        </data-table-cell>

                    </data-table-row>

                </template>

            </data-table>

        </modal-section>

        <modal-section>

            <div slot="header" translate>
                ${model.orders.length} Orders will be changed
            </div>

            <data-table
                appearance="rows">

                <data-table-headers>

                    <data-table-cell>
                        <span class="text-truncate" translate>
                            ID
                        </span>
                    </data-table-cell>

                    <data-table-cell>
                        <span class="text-truncate" translate>
                            Status
                        </span>
                    </data-table-cell>

                </data-table-headers>

                <template repeat.for="order of model.orders">

                    <data-table-row href="/orders/details/${order.slug}" target="_blank">

                        <data-table-cell>
                            <span class="text-truncate">
                                ${order.slug}
                            </span>
                        </data-table-cell>

                        <data-table-cell>
                            <span class="text-truncate">
                                ${order.status.name}
                            </span>
                        </data-table-cell>

                    </data-table-row>

                </template>

            </data-table>

        </modal-section>

        <div class="button-container margin-larger-top">

            <button appearance="solid" accent="primary" click.trigger="onChangeOrdersClick()" translate>
                Change orders
            </button>

        </div>

    </modal-panel>

</template>

<template>

    <require from="app/components/name-value-pair/name-value-pair"></require>
    <require from="app/components/name-value-list/name-value-list"></require>
    <require from="app/components/info-icon/info-icon"></require>

    <require from="./general.scss"></require>

    <page-section>

        <name-value-list class="font-small">

            <name-value-pair>

                <div slot="name" translate>
                    Last modified
                </div>

                <div slot="value">
                    04/03/2020 8:32
                    <span class="opacity-faded" translate>
                        by
                    </span>
                    Thomas Darling
                </div>

            </name-value-pair>

            <name-value-pair>

                <div slot="name" translate>
                    Created
                </div>

                <div slot="value">
                    05/03/2020 10:17
                    <span class="opacity-faded" translate>
                        by
                    </span>
                    Thomas Darling
                </div>

            </name-value-pair>

        </name-value-list>

        <h1 class="font-largest margin" tabindex="-1" autofocus="visible.bind: false" translate>
            General rules for the route plan
        </h1>

        <div class="margin-large-bottom" translate>
            Here you can tweak the settings for your routeplanning.
        </div>

        <text-input label="above" value.bind="settings.name">

            <div slot="heading" translate>
                Name of the rule set
            </div>

        </text-input>

    </page-section>

    <page-section>

        <hr class="hr-line margin-larger-bottom">

        <h1 class="font-large margin-large-bottom" translate>
            Begrænsninger
        </h1>

        <div class="control-row margin-large-bottom">

            <select-input label="above" none.bind="false" value.bind="settings.restrictions.uturnStrategy" display-value.bind="settings.restrictions.uturnStrategy.name" class="flex-basis-1-of-2">

                <div slot="heading" translate>
                    Strategy for U-turns
                </div>

                <item repeat.for="uturnStrategy of uturnStrategies" model.bind="uturnStrategy">
                    ${uturnStrategy.name}
                </item>

                <div slot="validation">

                    <required-validator
                        value.bind="settings.restrictions.uturnStrategy">
                    </required-validator>

                </div>

            </select-input>

            <select-input label="above" none.bind="false" value.bind="settings.restrictions.curbApproachStrategy" display-value.bind="settings.restrictions.curbApproachStrategy.name" class="flex-basis-1-of-2">

                <div slot="heading" translate>
                    Strategy for curb approach
                </div>

                <item repeat.for="curbApproachStrategy of curbApproachStrategies" model.bind="status">
                    ${curbApproachStrategy.name}
                </item>

                <div slot="validation">

                    <required-validator
                        value.bind="settings.restrictions.curbApproachStrategy">
                    </required-validator>

                </div>

            </select-input>

        </div>

        <div class="control-row margin-large-bottom">

            <number-input label="above" none.bind="false" value.bind="settings.restrictions.timeWindowAdjustment.start" class="flex-basis-1-of-2">

                <div slot="heading" translate>
                    Time frame narrowing to prevent early arrival
                </div>

                <span slot="after" class="opacity-faded">
                    min
                </span>

                <div slot="validation">

                    <required-validator
                        value.bind="settings.restrictions.timeWindowAdjustment.start">
                    </required-validator>

                </div>

            </number-input>

            <number-input label="above" none.bind="false" value.bind="settings.restrictions.timeWindowAdjustment.end" class="flex-basis-1-of-2">

                <div slot="heading" translate>
                    Time frame narrowing to prevent late arrival
                </div>

                <span slot="after" class="opacity-faded">
                    min
                </span>

                <div slot="validation">

                    <required-validator
                        value.bind="settings.restrictions.timeWindowAdjustment.end">
                    </required-validator>

                </div>

            </number-input>

        </div>

        <div class="control-row margin-large-bottom">

            <number-input label="above" value.bind="settings.restrictions.maxCalculationTime" class="flex-basis-1-of-2">

                <div slot="heading">
                    Max time for route calculation
                </div>

                <span slot="after" class="opacity-faded">
                    min
                </span>

                <div slot="validation">

                    <required-validator
                        value.bind="settings.restrictions.maxCalculationTime">
                    </required-validator>

                </div>

            </number-input>

            <div class="flex-basis-1-of-2"></div>

        </div>

        <div class="control-row margin-large-bottom">

            <check-toggle label="after" value.bind="settings.restrictions.ferriesAllowed" class="flex-basis-1-of-3">

                <div slot="heading" translate>
                    Allow ferries
                </div>

            </check-toggle>

            <check-toggle label="after" value.bind="settings.restrictions.privateRoadsAllowed" class="flex-basis-1-of-3">

                <div slot="heading" translate>
                    Allow private roads
                </div>

            </check-toggle>

            <check-toggle label="after" value.bind="settings.restrictions.highwaysAllowed" class="flex-basis-1-of-3">

                <div slot="heading" translate>
                    Allow highways
                </div>

            </check-toggle>

        </div>

        <div class="control-row">

            <check-toggle label="after" value.bind="settings.restrictions.oneRoutePlanPerStartLocation" class="flex-basis-1-of-3">

                <div slot="heading" translate>
                    One route per start location
                </div>

            </check-toggle>

        </div>

    </page-section>

    <page-section>

        <hr class="hr-line margin-larger-bottom">

        <h1 class="font-large margin-bottom" translate>
            After completion
        </h1>

        <h2 class="margin-large-bottom" translate>
            Here, with tags, you can lay a strategy for what happens after planning is completed
        </h2>

        <tags-input
            label="above"
            filter="auto"
            fixed.bind="true"
            value.bind="editModel.claimGroups">

            <div slot="heading" translate>
                Add tags to the route
            </div>

            <div slot="placeholder" translate>
                Add tags …
            </div>

            <div slot="value">

                <tag repeat.for="claimGroup of editModel.claimGroups" model.bind="claimGroup">
                    <span class="text-truncate">
                        ${claimGroup.name}
                    </span>
                </tag>

            </div>

            <item repeat.for="claimGroup of filteredAvailableClaimGroups" model.bind="claimGroup">
                <span class="text-truncate">
                    ${claimGroup.name}
                </span>
            </item>

        </tags-input>

    </page-section>

    <page-section>

        <hr class="hr-line margin-larger-bottom">

        <check-toggle label="after" value.bind="OLDMODEL" class="flex-basis-1-of-2">

            <span slot="heading">

                <span translate>
                    Approve routes manually
                </span>

                <info-icon position="${'top'}">

                    <div slot="headline" translate>
                        Manual approval
                    </div>

                    <div slot="body" translate>
                        If the system determines that the driver will be late on the stop, we will make the driver extra aware on the situation.
                    </div>

                </info-icon>

            </div>

        </check-toggle>

    </page-section>

</template>

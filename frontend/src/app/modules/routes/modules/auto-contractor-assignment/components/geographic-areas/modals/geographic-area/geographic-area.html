<template>

    <require from="./geographic-area.scss"></require>

    <modal-backdrop close="all"></modal-backdrop>

    <modal-dialog name="auto-contractor-assignment-geographic-area" close-button.bind="true" close-shortcut.bind="true" scroll validation validation.ref="validation">

        <modal-header>

            <h1 class="font-largest">

                <span if.bind="isNew" translate>
                    New area
                </span>

                <span if.bind="!isNew" translate>
                    Edit area
                </span>

            </h1>

        </modal-header>

        <modal-section>

            <text-input label="above" value.bind="model.label" class="margin-large-bottom" autofocus>

                <div slot="heading" translate>
                    Name of the area
                </div>

                <div slot="validation">

                    <required-validator
                        value.bind="model.label">
                    </required-validator>

                    <unique-validator
                        new-value.bind="model.label"
                        old-value.bind="areaLabel"
                        all-values.bind="allAreas | map: 'label'">
                    </unique-validator>

                </div>

            </text-input>

            <number-input label="above" value.bind="model.priority" class="margin-large-bottom">

                <div slot="heading" translate>
                    Priority
                </div>

                <div slot="validation">

                    <required-validator
                        value.bind="model.priority">
                    </required-validator>

                    <range-validator
                        value.bind="model.priority"
                        min.bind="0">
                    </range-validator>

                </div>

            </number-input>

            <select-input label="above" value.bind="model.fulfillerId" display-value.bind="selectedOrganization.name" class="margin-large-bottom">

                <div slot="heading" translate>
                    Organization
                </div>

                <item
                    repeat.for="organization of availableOrganizations"
                    model.bind="organization.id">
                    ${organization.name}
                </item>

                <div slot="validation">

                    <required-validator
                        value.bind="model.fulfillerId">
                    </required-validator>

                </div>

            </select-input>

            <tags-input label="above" new.bind="true" value.bind="model.routeTagsAllRequired" class="margin-large-bottom">

                <div slot="heading" translate>
                    Matches all the route tags
                </div>

            </tags-input>

            <tags-input label="above" new.bind="true" value.bind="model.routeTagsOneRequired">

                <div slot="heading" translate>
                    Matches some of the route tags
                </div>

            </tags-input>

            <!--
            <color-input label="above" value.bind="model.color">

                <div slot="heading" translate>
                    Color of the area
                </div>

                <div slot="description" translate>
                    This makes it easier to differentiate the areas on the map.
                </div>

                <div slot="validation">

                    <required-validator
                        value.bind="model.color">
                    </required-validator>

                </div>

            </color-input label="above">
            -->

        </modal-section>

        <modal-footer>

            <div class="button-container">

                <button appearance="outline" accent="primary" click.trigger="onDrawNewAreaClick()" translate>
                    Draw new area
                </button>

                <button appearance="solid" accent="primary" click.trigger="onDoneClick()" translate>
                    Done
                </button>

            </div>

        </modal-footer>

    </modal-dialog>

</template>

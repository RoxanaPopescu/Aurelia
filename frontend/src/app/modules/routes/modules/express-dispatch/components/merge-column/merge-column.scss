@import "resources/index";

page[name="routes"] page[name="express-dispatch"] merge-column
{
    // Use horizontal flex layout.
    display: flex;

    // Fill the available space.
    flex-grow: 1;
    flex-basis: 100%;

    // Allow the element to shrink.
    min-width: 0;

    z-index: 1;

    page-content
    {
        display: flex;
        flex-direction: column;
    }

    .stop-lists
    {
        flex-grow: 1;
        display: flex;
        min-height: 0;

        &.--dragging card
        {
            pointer-events: none;
        }
    }

    .stop-list-container
    {
        position: relative;
        flex-grow: 1;
        flex-basis: 100%;
        display: flex;
        flex-direction: column;

        &:not(:first-child)
        {
            margin-left: 20rem;
        }
    }

    .stop-list
    {
        --stop-card-height: 74rem;

        position: relative;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        background: var(--surface-color);
        border: var(--border-width-thin) solid var(--border-color);
        border-radius: var(--border-radius-medium);

        .express-stops-dropzone
        {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0;
            pointer-events: none;

            &.--dragover
            {
                transition: opacity var(--animation-duration-medium);
                opacity: 1;
            }

            > div
            {
                width: 100%;
                height: 100%;
                border: var(--border-width-medium) dashed var(--surface-primary-border-color);
                border-radius: var(--border-radius-medium);
            }
        }

        .driver-stops-dropzone
        {
            flex-grow: 1;
            margin-top: calc(-1 * var(--font-current-margin-top));
            padding-top: var(--font-current-margin-top);
            opacity: 0;

            &.--dragover
            {
                //transition: opacity var(--animation-duration-medium);
                opacity: 1;
            }

            > div
            {
                height: var(--stop-card-height);
                border: var(--border-width-medium) dashed var(--surface-primary-border-color);
                border-radius: var(--border-radius-medium);
            }
        }

        .stop-dropzone
        {
            position: absolute;
            top: calc(-1 * var(--font-current-margin-top));
            left: 0;
            width: 100%;
            padding-top: var(--font-current-margin-top);
            opacity: 0;

            > div
            {
                height: var(--stop-card-height);
                border: var(--border-width-medium) dashed var(--surface-primary-border-color);
                border-radius: var(--border-radius-medium);
            }
        }

        .stop-list-item
        {
            position: relative;

            &.--dragged
            {
                display: none;
            }

            &.--dragover
            {
                padding-top: calc(var(--stop-card-height) + var(--font-current-margin-top));

                .stop-dropzone
                {
                    //transition: opacity var(--animation-duration-medium);
                    opacity: 1;
                }
            }

            card > a
            {
                background: white;
                cursor: move;
            }

            .icon-drag-handle
            {
                align-self: center;
                font-size: 32rem;
                margin-right: -8rem;
                margin-left: 8rem;
            }

            .stop-icon
            {
                align-self: center;
                margin-right: var(--size-inline-spacing-larger);
                margin-left: 8rem;
            }

            &.driver-route-stop .stop-icon
            {
                width: 32rem;
                height: 32rem;
                line-height: 32rem;
                border-radius: 50%;
                text-align: center;
                background: gray;
                color: white;
            }

            &.express-route-stop .stop-icon
            {
                width: 28rem;
                height: 28rem;
                line-height: 28rem;
                border-radius: 3px;
                transform: rotate(45deg);
                text-align: center;
                background: gray;
                color: white;

                > div
                {
                    transform: rotate(-45deg);
                }
            }
        }
    }
}

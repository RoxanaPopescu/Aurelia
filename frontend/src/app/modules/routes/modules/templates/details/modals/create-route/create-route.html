<template>

    <require from="app/components/address-input/address-input"></require>

    <require from="./create-route.scss"></require>

    <modal-backdrop></modal-backdrop>

    <modal-panel name="create-route" position="right" close-button.bind="true" close-shortcut.bind="true" scroll validation validation.ref="validation">

        <modal-header scroll-fade>

            <h1 class="font-largest" tabindex="-1" autofocus="visible.bind: false" translate>
                Create route from template
            </h1>

        </modal-header>

        <modal-section class="margin-bottom">

            <div class="control-row margin-larger-bottom">

                <date-input label="above" value.bind="model.date" class="flex-basis-1-of-1">

                    <div slot="heading" translate>
                        Date
                    </div>

                    <div slot="validation">

                        <required-validator
                            value.bind="model.date">
                        </required-validator>

                    </div>

                </date-input>

            </div>

            <div class="control-row margin-large-bottom">

                <select-input label="above" none.bind="false" value.bind="model.status" display-value.bind="model.status.name" class="flex-basis-1-of-1">

                    <div slot="heading" translate>
                        Status
                    </div>

                    <item repeat.for="status of statuses" model.bind="status">
                        ${status.name}
                    </item>

                    <div slot="validation">

                        <required-validator
                            value.bind="model.status">
                        </required-validator>

                    </div>

                </select-input>

            </div>

            <div>
                <div class="flex-row margin-smaller-bottom">
                    <div class="input-heading" translate>
                        Driver
                    </div>

                    <div if.bind="model.driver" class="opacity-faded-more margin-left-large margin-right-large">
                        â€“
                    </div>

                    <div if.bind="model.driver" class="margin-right-large">
                        ${model.driver.name} (${model.driver.id})
                    </div>

                    <button if.bind="model.driver" appearance="none" accent="primary" click.trigger="onRemoveDriverClick()">
                        <icon name="close"></icon>
                    </button>
                </div>

                <button appearance="solid" accent="secondary" click.delegate="onAssignDriverClick()">
                    <template if.bind="!model.driver" translate>
                        Assign driver
                    </template>
                    <template if.bind="model.driver" translate>
                        Reassign
                    </template>
                </button>

            </div>


        </modal-section>

        <button appearance="solid" accent="primary" class="margin-larger-top" click.delegate="onCreateClick()" translate>
            Create route
        </button>

    </modal-panel>

</template>

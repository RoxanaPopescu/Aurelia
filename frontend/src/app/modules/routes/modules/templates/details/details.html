<template>

    <require from="./details.scss"></require>

    <page name="templates-details">

        <page-content scroll scroll.ref="scroll">

            <page-header scroll-fade class="flex-row">

                <h1 class="font-largest">
                    <path-nav>

                        <a accent="inherit" href="/routes" translate>
                            Routes
                        </a>

                        <a accent="inherit" href="/routes/templates/list" translate>
                            Templates
                        </a>

                        <span if.bind="!template.id" translate>
                            New template
                        </span>

                        <span if.bind="!template.id" translate>
                            ${template.reference}
                        </span>

                    </path-nav>
                </h1>

                <toolbar class="flex-push-right">

                    <button if.bind="!template.id" appearance="solid" accent="primary" click.trigger="onCreateClick()" translate>
                        Create template
                    </button>

                    <button if.bind="template.id" appearance="solid" accent="primary" click.trigger="onSaveClick()" translate>
                        Save template
                    </button>

                </toolbar>

            </page-header>

            <div class="flex-row">

                <div class="route-template-details-column">

                    <page-section>

                        <h2 class="font-larger margin-bottom" translate>
                            Route information
                        </h2>

                        <div class="control-row margin-large-bottom">

                            <text-input label="above" class="flex-grow" value.bind="template.reference">

                                <div slot="heading" translate>
                                    Route reference
                                </div>

                            </text-input>

                            <select-input label="above" class="flex-grow" value.bind="template.consignor">

                                <div slot="heading" translate>
                                    Consignor
                                </div>

                            </select-input>

                        </div>

                        <div class="control-row margin-large-bottom">

                            <number-input label="above" class="flex-grow" value.bind="template.price.amount">

                                <div slot="heading" translate>
                                    Price ex. VAT
                                </div>

                                <span slot="after" class="opacity-faded">
                                    ${template.price.currency.currencyCode}
                                </span>

                            </number-input>

                            <select-input label="above" none.bind="false" class="flex-grow" value.bind="template.routeCreationTime">

                                <div slot="heading" translate>
                                    Time of route creation
                                </div>

                                <item>
                                    1 month before
                                </item>

                            </select-input>

                        </div>

                        <div class="control-row margin-large-bottom">

                            <date-input label="above" class="flex-grow" value.bind="template.startDateTime">

                                <div slot="heading" translate>
                                    From date
                                </div>

                            </date-input>

                            <date-input label="above" class="flex-grow" value.bind="template.endDateTime">

                                <div slot="heading" translate>
                                    To date
                                </div>

                            </date-input>

                        </div>

                        <text-input label="above" lines.bind="3" value.bind="template.instructions">

                            <div slot="heading" translate>
                                Instructions
                            </div>

                        </text-input>

                    </page-section>

                    <page-section class="route-recurrence-section">

                        <h2 class="font-larger margin-bottom" translate>
                            Route recurrence
                        </h2>

                        <div class="control-row margin-large-bottom --all-days">

                            <check-toggle label="after" value.bind="false">

                                <div slot="heading" translate>
                                    All days
                                </div>

                            </check-toggle>

                            <select-input label="above" none.bind="false" class="flex-grow">

                                <div slot="heading" translate>
                                    Driver
                                </div>

                            </select-input>

                            <span translate>or</span>

                            <select-input label="above" none.bind="false" class="flex-grow">

                                <div slot="heading" translate>
                                    Status
                                </div>

                            </select-input>

                        </div>

                        <hr class="hr-line margin-large-bottom">

                        <div repeat.for="weekday of 6" class="control-row margin-bottom">

                            <check-toggle label="after" value.bind="false">

                                <div slot="heading">
                                    ${weekday + 1 | weekday}
                                </div>

                            </check-toggle>

                            <select-input none.bind="false" class="flex-grow">

                            </select-input>

                            <span translate>or</span>

                            <select-input none.bind="false" class="flex-grow">

                            </select-input>

                        </div>

                    </page-section>

                </div>

                <div class="route-template-details-column">

                    <page-section>

                        <h2 class="font-larger margin-bottom" translate>
                            Route stops
                        </h2>

                        <data-table
                            appearance="rows"
                            sorting.bind="sorting"
                            busy.bind="updateOperation.pending">

                            <data-table-headers>

                                <data-table-cell>
                                    <span class="text-truncate" translate>
                                        Stop
                                    </span>
                                </data-table-cell>

                                <data-table-cell>
                                    <span class="text-truncate" translate>
                                        Address
                                    </span>
                                </data-table-cell>

                                <data-table-cell>
                                    <span class="text-truncate" translate>
                                        Type
                                    </span>
                                </data-table-cell>

                                <data-table-cell>
                                    <span class="text-truncate" translate>
                                        Consignee phone
                                    </span>
                                </data-table-cell>

                                <data-table-cell>
                                    <span class="text-truncate" translate>
                                        Requirements
                                    </span>
                                </data-table-cell>

                                <data-table-cell>
                                    <span class="text-truncate" translate>
                                        Port
                                    </span>
                                </data-table-cell>

                                <data-table-cell>
                                    <span class="text-truncate" translate>
                                        Start time
                                    </span>
                                </data-table-cell>

                                <data-table-cell>
                                    <span class="text-truncate" translate>
                                        End time
                                    </span>
                                </data-table-cell>

                                <data-table-cell align="right">
                                    <!-- Icons -->
                                </data-table-cell>

                            </data-table-headers>

                        </data-table>

                        <busy-indicator if.bind="stops == null" class="margin-largest"></busy-indicator>

                        <empty-indicator if.bind="stops.length == 0" class="margin-largest" translate>
                            No results
                        </empty-indicator>

                    </page-section>

                </div>

            </div>

        </page-content>

    </page>

</template>

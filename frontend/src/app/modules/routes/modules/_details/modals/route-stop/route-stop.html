<template>

    <require from="app/components/address-input/address-input"></require>
    <require from="./components/route-stop-details/route-stop-details"></require>
    <require from="./components/route-stop-edit/route-stop-edit"></require>

    <require from="./route-stop.scss"></require>

    <modal-backdrop close="all"></modal-backdrop>

    <modal-panel name="route-stop" position="right" close-button.bind="true" close-shortcut.bind="true" scroll validation validation.ref="validation">

        <div slot="actions">

            <button
                if.bind="!edit"
                disabled.bind="['completed', 'arrived'].includes(model.routeStop.status.slug)"
                appearance="icon"
                title.translate="Edit stop"
                click.trigger="onEditClick()">
                <icon name="edit"></icon>
            </button>

            <button
                if.bind="edit"
                appearance="icon"
                title.translate="Edit stop"
                click.trigger="onSaveClick()">
                <icon name="save"></icon>
            </button>

        </div>

        <route-stop-details if.bind="!edit" model.bind="model"></route-stop-details>

        <route-stop-edit if.bind="edit" model.bind="model"></route-stop-edit>

    </modal-panel>

</template>

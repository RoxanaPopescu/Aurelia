@import "resources/index";

icon
{
    display: inline-flex;
    position: relative;
    width: 1em;
    height: 1em;
    line-height: 1;

    // Prevent shrinking when placed in a flex layout.
    flex-shrink: 0;

    // If placed in a flex container, center on the cross axis.
    align-self: center;

    // If placed inline with text, align to the bottom of the line box.
    // Note that this will only align as intended if both the line height
    // of the text and the height of the icon is equal to the font size.
    vertical-align: bottom;

    // Stack nested icons and let the outer-most icon control their size.
    // When used in a stack, the size and offset of individual icons should
    // be specified as percentages, so they scale together with the stack.
    icon
    {
        position: absolute;
        width: 100%;
        height: 100%;
    }

    &:empty
    {
        display: none;
    }

    svg
    {
        position: absolute;
        width: 100%;
        height: 100%;
    }

    &[inline]
    {
        vertical-align: baseline;

        svg
        {
            // HACK: Needed to ensure correct vertical alignment.
            // We should maybe consider making this a font variable.
            bottom: -0.125em;
        }
    }

    // Add accent color support.
    @each $accent in $accents
    {
        &[accent="#{$accent}"]
        {
            color: var(--surface-#{$accent}-icon-color);
        }
    }
}

// Apply colors to Material Design icons.
icon[class*="md-"]
{
    // Use the current foreground color for both stroke and fill.
    // This means that the markup for each icon must specify the
    // attributes `fill="none"` and `stroke="none"` as needed.

    // Note: `color` is not used.

    // Used as the primary icon color.
    fill: currentColor;

    // Not supported.
    stroke: none;
}

// Apply colors to Atlassian icons.
icon:not([class*="md-"])
{
    // Note: `color` is used as the primary icon color.

    // Not supported.
    stroke: none;

    // Used for elements inside a filled icon to give the impression of transparency.
    fill: var(--surface-color);
}
